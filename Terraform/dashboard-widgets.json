{
  "widgets": [
    {
      "type": "metric",
      "x": 0,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/CloudFront", "Requests", "DistributionId", "${dist_id}", "Region", "Global" ]
        ],
        "period": 300,
        "stat": "Sum",
        "region": "us-east-1",
        "title": "CloudFront - UI Requests (sum/5m)"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 0,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/CloudFront", "4xxErrorRate", "DistributionId", "${dist_id}", "Region", "Global", { "stat": "Average", "label": "4xxErrorRate" } ],
          [ "AWS/CloudFront", "5xxErrorRate", "DistributionId", "${dist_id}", "Region", "Global", { "stat": "Average", "label": "5xxErrorRate", "yAxis": "right" } ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "CloudFront - Error Rates (4xx / 5xx)"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 6,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/CloudFront", "CacheHitRate", "DistributionId", "${dist_id}", "Region", "Global" ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "CloudFront - Cache Hit Rate"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 6,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/Lambda", "Invocations", "FunctionName", "${image_lambda}" ],
          [ ".", "Errors", ".", ".", { "yAxis": "right" } ]
        ],
        "period": 60,
        "stat": "Sum",
        "region": "us-east-1",
        "title": "image_gen - Invocations / Errors"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 12,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/Lambda", "Duration", "FunctionName", "${image_lambda}", { "stat": "Average", "label": "avg(ms)", "period": 60 } ],
          [ "AWS/Lambda", "Throttles", "FunctionName", "${image_lambda}", { "stat": "Sum", "label": "throttles", "period": 60, "yAxis": "right" } ]
        ],
        "period": 60,
        "region": "us-east-1",
        "title": "image_gen - Duration & Throttles"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 12,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/Lambda", "Invocations", "FunctionName", "${twitter_lambda}" ],
          [ ".", "Errors", ".", ".", { "yAxis": "right" } ]
        ],
        "period": 60,
        "region": "us-east-1",
        "title": "twitter_post - Invocations / Errors"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/Lambda", "Invocations", "FunctionName", "${gallery_lambda}" ],
          [ ".", "Errors", ".", ".", { "yAxis": "right" } ]
        ],
        "period": 60,
        "region": "us-east-1",
        "title": "gallery_api - Invocations / Errors"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 18,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/S3", "BucketSizeBytes", "BucketName", "${image_bucket}", "StorageType", "StandardStorage", { "stat": "Average", "label": "Bytes", "period": 86400 } ],
          [ "AWS/S3", "NumberOfObjects", "BucketName", "${image_bucket}", "StorageType", "AllStorageTypes", { "stat": "Average", "period": 86400, "label":"Objects" } ]
        ],
        "period": 86400,
        "region": "us-east-1",
        "title": "S3 Image Bucket - Size & Objects (daily)"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 24,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/DynamoDB", "ConsumedReadCapacityUnits", "TableName", "${metadata_table}" ],
          [ "AWS/DynamoDB", "ConsumedWriteCapacityUnits", "TableName", "${metadata_table}", { "yAxis": "right" } ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "DynamoDB (spooky_days_table) - Read/Write Capacity"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 24,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/DynamoDB", "ReadThrottleEvents", "TableName", "${metadata_table}" ],
          [ "AWS/DynamoDB", "WriteThrottleEvents", "TableName", "${metadata_table}", { "yAxis": "right" } ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "DynamoDB (spooky_days_table) - Throttle Events"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 30,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/DynamoDB", "ConsumedReadCapacityUnits", "TableName", "${api_table}" ],
          [ "AWS/DynamoDB", "ConsumedWriteCapacityUnits", "TableName", "${api_table}", { "yAxis": "right" } ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "DynamoDB (spooky_days_api_table) - Read/Write Capacity"
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 30,
      "width": 12,
      "height": 6,
      "properties": {
        "metrics": [
          [ "AWS/DynamoDB", "ReadThrottleEvents", "TableName", "${api_table}" ],
          [ "AWS/DynamoDB", "WriteThrottleEvents", "TableName", "${api_table}", { "yAxis": "right" } ]
        ],
        "period": 300,
        "region": "us-east-1",
        "title": "DynamoDB (spooky_days_api_table) - Throttle Events"
      }
    }
  ]
}
